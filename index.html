<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <title>FUNCTION - ORIENTED METRICS</title>
  <!-- styling import -->
  <link rel="stylesheet" href="css/bootstrap.min.css">

  <!-- scripts import -->
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
</head>
<style>
  h1 {
    text-align: center;
    padding: 20px;
    font-weight: bold;
  }

  .count-section {
    width: 10%;
  }

  .subtotal-section {
    width: 15%;
  }

  .table>thead>tr>th {
    text-align: center;
    border: none;
    padding-bottom: 30px;
  }

  .table>tbody>tr>td {
    border: none;
    padding: 0 8px;
  }
</style>

<body>
  <div class="container-fluid">
    <h1>FUNCTION - ORIENTED METRICS</h1>
    <hr>
    <p>Function points <a href="http://ata.cs.hun.edu.tr/~sencer/reference.html">[Albrecht 1979]</a> are basic data from
      which productivity metrics could be computed.
      FP data is used in two ways:</p>
    <ul>
      <li>as an estimation variable that is used to "size" each element of the software,</li>
      <li>as baseline metrics collected from past projects and used in conjunction with estimation variables to develop
        cost and effort projections.</li>
    </ul>
    <br>
    <form>
      <table class="table top-section">
        <thead>
          <tr>
            <th>Measurement Parameter</th>
            <th>Count</th>
            <th></th>
            <th>Weighting Factor</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Number of User Inputs</td>
            <td class="count-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userInputsCount" value="0" />
              </div>
            </td>
            <td class="symbols">x</td>
            <td>
              <div class="form-group">
                <select class="form-control" id="userInputsWeight">
                  <option value="3">Simple: 3</option>
                  <option value="4" selected>Average: 4</option>
                  <option value="6">Complex: 6</option>
                </select>
              </div>
            </td>
            <td class="symbols">=</td>
            <td class="subtotal-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userInputsTotal" value="0" readonly />
              </div>
            </td>
          </tr>
          <tr>
            <td>Number of User Outputs</td>
            <td class="count-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userOutputsCount" value="0" />
              </div>
            </td>
            <td class="symbols">x</td>
            <td>
              <div class="form-group">
                <select class="form-control" id="userOutputsWeight">
                  <option value="4">Simple: 4</option>
                  <option value="5" selected>Average: 5</option>
                  <option value="7">Complex: 7</option>
                </select>
              </div>
            </td>
            <td class="symbols">=</td>
            <td class="subtotal-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userOutputsTotal" readonly value="0" />
              </div>
            </td>
          </tr>
          <tr>
            <td>Number of User Inquiries</td>
            <td class="count-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userInquiriesCount" value="0" />
              </div>
            </td>
            <td class="symbols">x</td>
            <td>
              <div class="form-group">
                <select class="form-control" id="userInquiriesWeight">
                  <option value="3">Simple: 3</option>
                  <option value="4" selected>Average: 4</option>
                  <option value="6">Complex: 6</option>
                </select>
              </div>
            </td>
            <td class="symbols">=</td>
            <td class="subtotal-section">
              <div class="form-group">
                <input type="number" class="form-control" name="userInquiriesTotal" readonly value="0" />
              </div>
            </td>
          </tr>
          <tr>
            <td>Number of Files</td>
            <td class="count-section">
              <div class="form-group">
                <input type="number" class="form-control" name="filesCount" value="0" />
              </div>
            </td>
            <td class="symbols">x</td>
            <td>
              <div class="form-group">
                <select class="form-control" id="filesWeight">
                  <option value="7">Simple: 7</option>
                  <option value="10" selected>Average: 10</option>
                  <option value="15">Complex: 15</option>
                </select>
              </div>
            </td>
            <td class="symbols">=</td>
            <td class="subtotal-section">
              <div class="form-group">
                <input type="number" class="form-control" name="filesTotal" readonly value="0" />
              </div>
            </td>
          </tr>
          <tr>
            <td>Number of External Interfaces</td>
            <td class="count-section">
              <div class="form-group">
                <input type="number" class="form-control" name="interfaceCount" value="0" />
              </div>
            </td>
            <td class="symbols">x</td>
            <td>
              <select class="form-control" id="interfaceWeight">
                <option value="5">Simple: 5</option>
                <option value="7" selected>Average: 7</option>
                <option value="10">Complex: 10</option>
              </select>
  </div>
  </td>
  <td class="symbols">=</td>
  <td class="subtotal-section">
    <div class="form-group">
      <input type="number" class="form-control" name="interfaceTotal" readonly value="0" />
    </div>
  </td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td>Total Count</td>
    <td>=</td>
    <td>
      <input type="number" class="form-control" name="countTotal" readonly value="0" />
    </td>
  </tr>
  </tbody>
  </table>
  <p>Rate each factor (Fi, i=1 to14) on a scale of 0 to 5:</p>
  <img src="images/scale.gif" />
  <br>
  <br>
  <div class="factor-section">
    <div class="form-group row">
      <div class="col-xs-10">F1. Does the system require reliable backup and recovery?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F2. Are data communications required?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F3. Are there distributed processing functions?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F4. Is performance critical?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F5. Will the system run in a existing, heavily utilized operational environment?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F6. Does the system require on-line data entry?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F7. Does the on-line data entry require the input transaction to be built over multiple
        screens or operations? </div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F8. Are the master files updated on-line?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F9. Are the inputs, outputs, files or inquiries complex?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F10. Is the internal processing complex?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F11. Is the code designed to be reusable?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F12. Are conversion and installation included in the design?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F13. Is the system designed for multiple installations in different organizations?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
    <div class="form-group row">
      <div class="col-xs-10">F14. Is the application designed to facilitate change and ease of use by the user?</div>
      <div class="col-xs-2">
        <input type="number" class="form-control" name="F1" value="0" />
      </div>
    </div>
  </div>
  <br>
  <h3>Language Factor</h3>
  <hr>
  <table class="table">
    <thead>
      <tr>
        <th>Language</th>
        <th>Level</th>
        <th>FP/Man/Month</th>
        <th>LOC/FP</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <select class="form-control language-section">
            <option>Select a Language</option>
          </select>
        </td>
        <td><input type="number" class="form-control" id="languageLevel" readonly /></td>
        <td><input type="number" class="form-control" id="FP-Man-Month" readonly /></td>
        <td><input type="number" class="form-control" id="LOC-FP" readonly /></td>
      </tr>
    </tbody>
  </table>
  <br>
  <br>
  <h3>Additional Factor</h3>
  <hr>
  <select class="form-control" id="other-factor">
    <option>Select Other Factor</option>
    <option>Development Environment</option>
  </select>
  <br>
  <br>
  <div class="additional-section">

  </div>
  </div>
  <br>
  <br>
  <div class="container-fluid">
    <input type="button" class="submit btn btn-primary" value="Calculate">
    <input type="reset" class="btn btn-danger" name="Reset"></p>
    </form>
    <br>
    <div class="results-section">
      <p style="font-size:2em;"><span style="font-weight:bold;">Results</span> - According to the input your project
        has:</p>
      <p style="font-size:2em; margin-left: 5%">Function Points: <span id="resultsFunctionPoints"></span></span></p>
      <p style="font-size:2em; margin-left: 5%">Lines of Code: <span id="resultsLinesOfCode"></span></span></p>
      <p style="font-size:2em; margin-left: 5%">Time: <span id="resultsTime"></span></span></p>
    </div>
  </div>
  </div>
</body>

</html>

<script type="text/javascript">
  var total = 0;
  var factorTotal = 0;
  var languageMultiplyer = null;
  var additionalTotal = 0;

  function calculateTop() {
    total = 0;
    var inputsTotal = $("input[name*='userInputsCount']").val() * $("#userInputsWeight").val();
    $("input[name*='userInputsTotal']").val(inputsTotal);
    var outputTotal = $("input[name*='userOutputsCount']").val() * $("#userOutputsWeight").val();
    $("input[name*='userOutputsTotal']").val(outputTotal);
    var inquiriesTotal = $("input[name*='userInquiriesCount']").val() * $("#userInquiriesWeight").val();
    $("input[name*='userInquiriesTotal']").val(inquiriesTotal);
    var filesTotal = $("input[name*='filesCount']").val() * $("#filesWeight").val();
    $("input[name*='filesTotal']").val(filesTotal);
    var interfaceTotal = $("input[name*='interfaceCount']").val() * $("#interfaceWeight").val();
    $("input[name*='interfaceTotal']").val(interfaceTotal);
    total = inputsTotal + outputTotal + inquiriesTotal + filesTotal + interfaceTotal;
    $("input[name*='countTotal']").val(total);
  }

  function environmentFactorCalc() {
    var additionalTotal = 1;
    $(".additional-section").find("input[type=number]").each(function () {
      if (this.id !== "additionalTotal") {
        additionalTotal *= parseInt(this.value);
      }
    });
    $(".additional-section").find("select").each(function () {
      additionalTotal *= parseInt(this.value);
    });
  }

  function calculateFactors() {
    additionalTotal = $("#additionalTotal").val();
    if (additionalTotal === undefined) {
      additionalTotal = 0;
    }
    factorTotal = 0;
    total = $("input[name*='countTotal']").val();
    $(".factor-section").find("input[type=number]").each(function () {
      factorTotal += parseInt(this.value);
    });

    // calculate FP
    var getFunctionPoints = parseInt(total * (0.65 + 0.01 * factorTotal) + additionalTotal);
    $("#resultsFunctionPoints").html(getFunctionPoints + " FP");

    // calculate LOC
    if (getFunctionPoints > 0 && languageMultiplyer > 0 ) {
      var getLinesOfCode = parseInt(getFunctionPoints * languageMultiplyer);
      $("#resultsLinesOfCode").html(getLinesOfCode + " LOC");
    }

    // calculate man months
    var getTime = parseFloat(getFunctionPoints / manMonthMultiplyer).toFixed(2);
    $("#resultsTime").html(getTime + " Months");
  };

  $(document).ready(function () {
    var languages = [];
    $(".submit").click(function () {
      calculateFactors();
    });

    // calculate top when input is change
    $(".top-section").find("input[type=number]").change(function () {
      calculateTop();
    });
    $(".top-section").find("select").change(function () {
      calculateTop();
    });

    // ajax call to language json file
    $.ajax({
      url: "languages.txt",
      dataType: "json",
      success: function (data) {
        languages = data;
        $.each(languages, function (key, value) {
          $(".language-section").append("<option value='" + key + "'>" + value["LANGUAGE"] + "</option>");
        });

        $(".language-section").change(function () {
          if (this.value === "Select a Language") {
            $("#languageLevel").val("");
            $("#FP-Man-Month").val("");
            $("#LOC-FP").val("");
          }
          else {
            $("#languageLevel").val(languages[this.value]["LEVEL"]);
            $("#FP-Man-Month").val(languages[this.value]["FP/Man/Month"]);
            $("#LOC-FP").val(languages[this.value]["LOC/FP"]);

            languageMultiplyer = parseInt($("#LOC-FP").val());
            manMonthMultiplyer = parseFloat($("#FP-Man-Month").val());
          }

        });
      }
    });
    // Other Factor Section
    $("#other-factor").change(function () {
      $(".additional-section").html();
      // IF DEVELOPEMENT ENVIRONMENT IS SELECTED
      if (this.value === "Development Environment") {
        $.ajax({
          url: "environment.csv",
          dataType: "text",
          success: function (data) {
            var questions = data.split("\n");
            var count = 0;
            $.each(questions, function (i, a) {
              var textToPut = a;
              var formInput = "";
              if (count === 0 || count === 2) {
                formInput = "<select class='form-control'>"
                  + "<option value='10' selected>No</option>"
                  + "<option value='5' >Some What</option>"
                  + "<option value='2'>Yes</option>"
                  + "</select>";
              }
              else {
                formInput = "<input type='number' class='form-control' value='1'/>";
              }
              if (a === "") {
                textToPut = "Total FP from Environment";
                formInput = "<input type='number' class='form-control' id='additionalTotal' readonly value='50'/>";
              }
              $(".additional-section").append(
                "<div class='form-group row'><div class='col-xs-10'>" + textToPut + " </div>" +
                "<div class='col-xs-2'>" + formInput + "</div></div>"
              );

              count++;
            });
            $(".additional-section").find("input[type=number]").change(function () {
              environmentFactorCalc();
            });
            $(".additional-section").find("select").change(function () {
              environmentFactorCalc();
            });
          }

        });
      }
    });


  })
</script>